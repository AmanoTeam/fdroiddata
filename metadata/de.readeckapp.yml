Categories:
  - Internet
  - Reading
License: GPL-3.0-only
AuthorName: Jens DÃ¼rr
SourceCode: https://github.com/jensomato/ReadeckApp
IssueTracker: https://github.com/jensomato/ReadeckApp/issues
Changelog: https://github.com/jensomato/ReadeckApp/blob/HEAD/CHANGELOG.md

AutoName: Readeck App

RepoType: git
Repo: https://github.com/jensomato/ReadeckApp.git
Binaries: https://github.com/jensomato/ReadeckApp/releases/download/v%v/ReadeckApp-%v.apk

Builds:
  - versionName: 0.3.1
    versionCode: 301
    commit: 018a4d844d353f2b379f7a74849ecae94f9e21a7
    subdir: app
    sudo:
      - export CPUS_MAX=16
      - export CPUS=$(getconf _NPROCESSORS_ONLN)
      - for (( c=$CPUS_MAX; c<$CPUS; c++ )) ; do echo 0 > /sys/devices/system/cpu/cpu$c/online
        ; done
    gradle:
      - githubRelease
    postbuild:
      - curl -Lo upstream.apk https://github.com/jensomato/ReadeckApp/releases/download/v$$VERSION$$/ReadeckApp-$$VERSION$$.apk
      - unzip -q upstream.apk -d apk
      - export hash=$(sha256sum apk/assets/dexopt/baseline.prof)
      - rm -rf apk upstream.apk
      - for i in {1..10}; do unzip -q $$OUT$$ -d apk; sha256sum -c - <<< $hash &&
        break; sha256sum apk/assets/dexopt/baseline.prof; rm -fr apk; gradle clean
        assembleGithubReleaseRelease; done

AllowedAPKSigningKeys: 534f1f1c839a179258a2eb413c756aa601a69e79e1354783b681c51076e81060

AutoUpdateMode: Version
UpdateCheckMode: Tags
CurrentVersion: 0.3.1
CurrentVersionCode: 301
